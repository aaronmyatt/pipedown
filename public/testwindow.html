<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Window</title>
    <script>
        function appendDataToBody(data){
            const script = document.createElement('script')
            script.type = 'application/json'
            script.textContent = data;
            document.body.appendChild(script)
        }

    </script>
    <script>
        window.addEventListener('message', function(e){
            let data = JSON.parse(e.data)

            PD[data.pipe](data.inputs)
                    .then(pipe => {
                        return pipe.process(data.inputs)
                    })
                    .then(result => {
                        window.opener && window.opener.postMessage(JSON.stringify({
                            pipe: data.pipe,
                            result: result
                        }), '*')
                        appendDataToBody(JSON.stringify(result))
            })

            appendDataToBody(e.data)
        })
    </script>
    <style>
        body {
            min-height: 100vh; /* Ensures the container takes up the full viewport height */
            width: 100%; /* Ensures the container takes up the full viewport height */
        }
        body > div {
            min-height: 100vh; /* Ensures the container takes up the full viewport height */
            width: 100%; /* Ensures the container takes up the full viewport height */
        }
    </style>
    <script src="/scripts/pdglobal.js"></script>
</head><body>Nada</body></html>
