{"id":29,"name":"Sort pipe functions modal","description":"","code":"// this input was generated by the property editor\n// making changes manually may have unexpected results\ninput.html = `<dialog class=\"${input.selectorText}\">\n            <div x-intersect:enter=\"initSortable\"\n                    x-data=\"{\n                    initSortable(){\n                        var interval = setInterval(waitForSortable = () => {\n                          console.log('waiting for Sortable...')\n                          if(!window.Sortable) return\n                          const sort = Sortable.create($el, {\n                            items: '.item',\n                            handle: '.handle',\n                            ghostClass: 'placeholder',\n                            onEnd: (_evt) => {\n                                let pipe = $store.pipes.current;\n                                pipe.functions = sort.toArray().map(Number)\n                                  .filter(id => pipe.functions.includes(id));\n                                PD.pdUpdatePipe({server: true, pipe }).then(result => {\n                                   pipe.functions = result.updatedPipe.functions\n                                   console.log(pipe)\n                                })\n                            }\n                          })\n                          clearInterval(interval)\n                        }, 100)\n                    }\n                }\" class=\"btn-group-vertical justify-content-center gap-2\">\n                <template x-for=\"F in $store.pipes.current.functions\">\n                    <button\n                            :data-id=\"F\"\n                            :key=\"F\"\n                            x-data=\"{ \n                              func: null, \n                              init(){ this.func = $store.functions.getFunction(F); } }\"\n                            class=\"item handle btn btn-primary d-flex gap-3\">\n                        <i class=\"bi bi-arrows-move\"></i>\n                        <span x-text=\"func.id\"></span>\n                        <span class=\"ms-auto\" x-text=\"func.name\"> </span>\n                    </button>\n                </template>\n            </div>\n</dialog>`","archived":false,"render":false,"transform":{"prop":"html"},"dependency":false,"execOnServer":false}